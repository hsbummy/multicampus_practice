# 개인적인 공부이지만 My SQL 이고 수업과 연관이 있다.



## 프로그래머스 SQL kit 문제를 다 풀었다.



### SELECT 구문



```mysql
# 1. 모든 레코드 조회하기
SELECT * FROM ANIMAL_INS

# 2. 역순 정렬하기
SELECT NAME, DATETIME FROM ANIMAL_INS ORDER BY ANIMAL_ID DESC

# 3. 아픈 동물 찾기
SELECT ANIMAL_ID,NAME FROM ANIMAL_INS WHERE INTAKE_CONDITION="Sick" ORDER BY ANIMAL_ID

# 4. 어린 동물 찾기
SELECT ANIMAL_ID, NAME FROM ANIMAL_INS WHERE INTAKE_CONDITION != 'Aged' ORDER BY ANIMAL_ID

# 5. 동물의 아이디와 이름
SELECT ANIMAL_ID, NAME FROM ANIMAL_INS ORDER BY ANIMAL_ID
```



### SUM,MAX,MIN

```mysql
# 1. 최댓값 구하기
SELECT DATETIME FROM ANIMAL_INS ORDER BY DATETIME DESC LIMIT 1

# 2. 최솟값 구하기
SELECT DATETIME FROM ANIMAL_INS ORDER BY DATETIME LIMIT 1

# 3. 동물 수 구하기
SELECT COUNT(ANIMAL_ID) FROM ANIMAL_INS

# 4. 중복 제거하기
SELECT COUNT(DISTINCT(NAME)) FROM ANIMAL_INS
```



### GROUP BY

```mysql
# 1. 고양이와 개는 몇 마리 있을까?
SELECT ANIMAL_TYPE, COUNT(ANIMAL_TYPE) FROM ANIMAL_INS
GROUP BY ANIMAL_TYPE
ORDER BY ANIMAL_TYPE

# 2. 동명 동물 수
SELECT NAME, COUNT(NAME) FROM ANIMAL_INS
GROUP BY NAME
HAVING COUNT(NAME) > 1
ORDER BY NAME

# 3. 입양 시각 구하기 (1)
SELECT HOUR(DATETIME) AS HOUR, COUNT(HOUR(DATETIME)) AS COUNT FROM ANIMAL_OUTS
GROUP BY HOUR
HAVING HOUR BETWEEN 9 AND 19
ORDER BY HOUR

# 4. 입양 시각 구하기 (2)
SET @ROWNUM := -1;
SELECT h.HOUR, COUNT(hour(a.DATETIME)) FROM (
    SELECT (@ROWNUM := @ROWNUM+1) as HOUR FROM ANIMAL_OUTS limit 24
) as h
LEFT JOIN ANIMAL_OUTS as a
ON h.HOUR = hour(a.DATETIME)
GROUP BY h.HOUR
ORDER BY h.HOUR asc
```



### IS NULL

```mysql
# 1. 이름이 없는 동물의 아이디
SELECT ANIMAL_ID FROM ANIMAL_INS WHERE NAME IS NULL ORDER BY ANIMAL_ID

# 2. 이름이 있는 동물의 아이디
SELECT ANIMAL_ID FROM ANIMAL_INS WHERE NAME IS NOT NULL ORDER BY ANIMAL_ID

# 3. NULL 처리하기
SELECT ANIMAL_TYPE, IFNULL(NAME,"No name"), SEX_UPON_INTAKE FROM ANIMAL_INS ORDER BY ANIMAL_ID
```



### JOIN

```mysql
# 1. 없어진 기록 찾기
SELECT AO.ANIMAL_ID, AO.NAME FROM ANIMAL_OUTS AO
LEFT OUTER JOIN ANIMAL_INS AI
ON AO.ANIMAL_ID = AI.ANIMAL_ID
WHERE AI.ANIMAL_ID IS NULL
ORDER BY AO.ANIMAL_ID

# 2. 있었는데요 없었습니다.
SELECT AO.ANIMAL_ID, AO.NAME FROM ANIMAL_OUTS AO
JOIN ANIMAL_INS AI
ON AO.ANIMAL_ID = AI.ANIMAL_ID
WHERE AO.DATETIME < AI.DATETIME
ORDER BY AI.DATETIME

# 3. 오랜 기간 보호한 동물(1)
SELECT AI.NAME, AI.DATETIME FROM ANIMAL_INS AI
LEFT OUTER JOIN ANIMAL_OUTS AO
ON AI.ANIMAL_ID = AO.ANIMAL_ID
WHERE AO.ANIMAL_ID IS NULL
ORDER BY AI.DATETIME
LIMIT 3

# 4. 보호소에서 중성화한 동물
SELECT AO.ANIMAL_ID, AO.ANIMAL_TYPE, AO.NAME
FROM ANIMAL_OUTS AO
JOIN ANIMAL_INS AI
ON AO.ANIMAL_ID = AI.ANIMAL_ID
WHERE AO.SEX_UPON_OUTCOME != AI.SEX_UPON_INTAKE
ORDER BY AO.ANIMAL_ID
```



### String, Date

```mysql
# 1. 루시와 엘라 찾기
SELECT ANIMAL_ID, NAME, SEX_UPON_INTAKE FROM ANIMAL_INS
WHERE NAME='Lucy' OR NAME='Ella' OR NAME='Pickle' OR NAME='Rogan' OR NAME='Sabrina' OR NAME='Mitty'

# 2. 이름에 el이 들어가는 동물 찾기
SELECT ANIMAL_ID , NAME FROM ANIMAL_INS
WHERE NAME LIKE('%el%') AND ANIMAL_TYPE = 'Dog'
ORDER BY NAME

# 3. 중성화 여부 파악하기
SELECT ANIMAL_ID, NAME, IF(SEX_UPON_INTAKE LIKE ('Neutered%') OR SEX_UPON_INTAKE LIKE ('Spayed%'),'O','X') 
FROM ANIMAL_INS

# 4. 오랜 기간 보호한 동물 (2)
SELECT AI.ANIMAL_ID, AI.NAME FROM ANIMAL_INS AI
INNER JOIN ANIMAL_OUTS AO
ON AI.ANIMAL_ID = AO.ANIMAL_ID
ORDER BY (AI.DATETIME - AO.DATETIME)
LIMIT 2

# 5. DATETIME에서 DATE로 형 변환
SELECT ANIMAL_ID, NAME, DATE_FORMAT(DATETIME, '%Y-%m-%d')
FROM ANIMAL_INS
ORDER BY ANIMAL_ID
```



